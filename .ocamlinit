#load "lexer.cmo";;
#load "parser.cmo";;
#load "utils.cmo"
#load "exceptions.cmo"
#load "preparetyper.cmo"

(*
#load "typechecker.cmo";;
#load "x86_64.cmo";;
#load "codegeneration.cmo";;
#load "main.cmo";;*)

let pipeline filename =
  open_in filename
  |> Lexing.from_channel
  |> Parser.program Lexer.lex
  |> Preparetyper.prepare
;;

let stepped_pipeline filename =
    let file = open_in filename in
    let lexed = Lexing.from_channel file in
    try  (None ,Some (Parser.program Lexer.lex lexed))
    with | _ -> (Some lexed, None)

